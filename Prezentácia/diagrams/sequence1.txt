title Aktualizácia košíka

activate CartController
activate OrderFacade
activate CartService
activate CartRepository

CartController->OrderFacade:AddFoodToCart

break quantity<0
OrderFacade-->CartController: throw
end

alt quantity == 0
OrderFacade->CartService:RemoveItem
CartService->CartRepository:GetCart
CartRepository-->CartService:return

CartService->CartRepository:RemoveItem
CartRepository-->CartService:void
CartService-->OrderFacade:void
OrderFacade-->CartController:void

else quantity > 0
OrderFacade->CartService:AddItemToCart
CartService->CartRepository:AddFood
activate DbContext
CartRepository->DbContext:GetCartItem
DbContext-->CartRepository:return
deactivate DbContext
alt cartItem != null
activate DbContext
CartRepository->DbContext:UpdateCartItem
deactivate DbContext
else cartItem == null
activate DbContext
CartRepository->DbContext:AddCartItem
DbContext-->CartRepository:void
deactivate DbContext
CartRepository-->CartService:void
CartService-->OrderFacade:void
OrderFacade-->CartController:void
end
end
